# HG changeset patch
# User Ted Mielczarek <ted.mielczarek@gmail.com>
# Date 1291234460 18000
# Node ID e627e2e971842b6fecaa34975c120cd4c9ef3a60
# Parent  cf9c1d822fd2a523a5ec01aaebd886d2e92b4122
[mq]: nsprocess

diff --git a/xpcom/threads/nsProcessCommon.cpp b/xpcom/threads/nsProcessCommon.cpp
--- a/xpcom/threads/nsProcessCommon.cpp
+++ b/xpcom/threads/nsProcessCommon.cpp
@@ -67,7 +67,11 @@
 #include "nsReadableUtils.h"
 #else
 #ifdef XP_MACOSX
+#ifdef MOZ_WIDGET_COCOA
 #include <crt_externs.h>
+#else
+extern "C" char*** _NSGetEnviron(void);
+#endif
 #include <spawn.h>
 #include <sys/wait.h>
 #endif
