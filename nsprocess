# HG changeset patch
# User Ted Mielczarek <ted.mielczarek@gmail.com>
# Date 1291234460 18000
# Node ID 2b6cc3b3bd3d0809f3cd11108b658f2a78ce3f6f
# Parent 7fe677865559771b4c810e0dbd42e935dbbc3b6c
[mq]: nsprocess

diff --git a/xpcom/threads/nsProcessCommon.cpp b/xpcom/threads/nsProcessCommon.cpp
--- a/xpcom/threads/nsProcessCommon.cpp
+++ b/xpcom/threads/nsProcessCommon.cpp
@@ -67,7 +67,11 @@
 #include "nsReadableUtils.h"
 #else
 #ifdef XP_MACOSX
+#ifdef MOZ_WIDGET_COCOA
 #include <crt_externs.h>
+#else
+extern "C" char*** _NSGetEnviron(void);
+#endif
 #include <spawn.h>
 #include <sys/wait.h>
 #endif
