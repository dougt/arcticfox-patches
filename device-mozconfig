# HG changeset patch
# User Ted Mielczarek <ted.mielczarek@gmail.com>
# Date 1288962718 14400
# Node ID 164458ea4aa5af2383c243331ddccc6ea38bf840
# Parent 7ace2fb0a39788d7bffda09ee434844c617c53a7
imported patch device-mozconfig
* * *
imported patch mozconfig-extra

diff --git a/build/iphone-device-mozconfig b/build/iphone-device-mozconfig
new file mode 100644
--- /dev/null
+++ b/build/iphone-device-mozconfig
@@ -0,0 +1,33 @@
+mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/../iphone-device-debug
+mk_add_options MOZ_MAKE_FLAGS="-j6"
+ac_add_options --enable-application=browser
+ac_add_options --enable-debug
+ac_add_options --disable-optimize
+
+export CROSS_COMPILE=1
+export CC="/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc-4.2 -arch armv6 -miphoneos-version-min=3.2"
+export CXX="/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++-4.2 -arch armv6 -miphoneos-version-min=3.2"
+export CPP="/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/cpp-4.2 -arch armv6"
+export LD="/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/ld -arch armv6"
+export AR=/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/ar
+export AS="/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/as -arch armv6"
+export STRIP=/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/strip
+
+export PKG_CONFIG_PATH=/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS3.2.sdk/usr/lib/pkgconfig/
+
+ac_add_options --with-macos-sdk=/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS3.2.sdk
+ac_add_options --target=arm-apple-darwin9
+
+#XXX: should make these defaults
+ac_add_options --disable-printing
+ac_add_options --disable-plugins
+ac_add_options --disable-necko-wifi
+ac_add_options --disable-negotiateauth
+ac_add_options --disable-ogg
+ac_add_options --disable-wave
+ac_add_options --disable-webm
+ac_add_options --disable-ipc
+ac_add_options --disable-updater
+ac_add_options --disable-crashreporter
+#ac_add_options --disable-tests
+export SKIP_LIBREG=1
diff --git a/content/events/src/nsIMEStateManager.cpp b/content/events/src/nsIMEStateManager.cpp
--- a/content/events/src/nsIMEStateManager.cpp
+++ b/content/events/src/nsIMEStateManager.cpp
@@ -122,6 +122,7 @@
                                  nsIContent* aContent)
 {
   NS_ENSURE_ARG_POINTER(aPresContext);
+  printf("nsIMEStateManager::OnChangeFocus\n");
 
   nsCOMPtr<nsIWidget> widget = GetWidget(aPresContext);
   if (!widget) {
diff --git a/dom/base/nsFocusManager.cpp b/dom/base/nsFocusManager.cpp
--- a/dom/base/nsFocusManager.cpp
+++ b/dom/base/nsFocusManager.cpp
@@ -1543,6 +1543,7 @@
                       PRBool aFocusChanged,
                       PRBool aWindowRaised)
 {
+  printf("nsFocusManager::Focus\n");
   if (!aWindow)
     return;
 
diff --git a/widget/src/uikit/nsWindow.h b/widget/src/uikit/nsWindow.h
--- a/widget/src/uikit/nsWindow.h
+++ b/widget/src/uikit/nsWindow.h
@@ -138,8 +138,14 @@
     NS_IMETHOD GetAttention(PRInt32 aCycleCount) { return NS_ERROR_NOT_IMPLEMENTED; }
     NS_IMETHOD BeginResizeDrag(nsGUIEvent* aEvent, PRInt32 aHorizontal, PRInt32 aVertical) { return NS_ERROR_NOT_IMPLEMENTED; }
 
-    NS_IMETHOD SetIMEEnabled(PRUint32 aState) { return NS_ERROR_NOT_IMPLEMENTED; };
-    NS_IMETHOD GetIMEEnabled(PRUint32* aState) { return NS_ERROR_NOT_IMPLEMENTED; };
+    NS_IMETHOD SetIMEEnabled(PRUint32 aState) {
+        printf("SetIMEEnabled(%x)\n");
+        return NS_ERROR_NOT_IMPLEMENTED;
+    };
+    NS_IMETHOD GetIMEEnabled(PRUint32* aState) {
+        printf("GetIMEEnabled\n");
+        return NS_ERROR_NOT_IMPLEMENTED;
+    };
 
     gfxASurface* GetThebesSurface();
 
