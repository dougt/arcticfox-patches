diff --git a/xpfe/appshell/src/nsAppShellService.cpp b/xpfe/appshell/src/nsAppShellService.cpp
--- a/xpfe/appshell/src/nsAppShellService.cpp
+++ b/xpfe/appshell/src/nsAppShellService.cpp
@@ -158,7 +158,7 @@
   nsresult rv;
   PRInt32 initialHeight = 100, initialWidth = 100;
     
-#ifdef XP_MACOSX
+#ifdef MOZ_WIDGET_COCOA
   PRUint32    chromeMask = 0;
   nsCOMPtr<nsIPrefBranch> prefBranch;
   nsCOMPtr<nsIPrefService> prefs = do_GetService(NS_PREFSERVICE_CONTRACTID);
@@ -184,7 +184,7 @@
 
   mHiddenWindow.swap(newWindow);
 
-#ifdef XP_MACOSX
+#ifdef MOZ_WIDGET_COCOA
   // hide the hidden window by launching it into outer space. This
   // way, we can keep it visible and let the OS send it activates
   // to keep menus happy. This will cause it to show up in window
