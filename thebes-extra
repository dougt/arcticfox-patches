# HG changeset patch
# User Ted Mielczarek <ted.mielczarek@gmail.com>
# Date 1272373068 14400
# Node ID b763dfb05e099e3a689f892fa2b22c911d1ac443
# Parent  855f69717cb359b72f603ff3683175fde931b2da
imported patch thebes-extra

diff --git a/gfx/thebes/public/gfxQuartzPDFSurface.h b/gfx/thebes/public/gfxQuartzPDFSurface.h
--- a/gfx/thebes/public/gfxQuartzPDFSurface.h
+++ b/gfx/thebes/public/gfxQuartzPDFSurface.h
@@ -41,7 +41,11 @@
 #include "gfxASurface.h"
 #include "gfxContext.h"
 
+#ifdef MOZ_WIDGET_COCOA
 #include <Carbon/Carbon.h>
+#else
+#include <CoreGraphics/CoreGraphics.h>
+#endif
 
 class THEBES_API gfxQuartzPDFSurface : public gfxASurface {
 public:
diff --git a/gfx/thebes/src/Makefile.in b/gfx/thebes/src/Makefile.in
--- a/gfx/thebes/src/Makefile.in
+++ b/gfx/thebes/src/Makefile.in
@@ -174,7 +174,7 @@
 EXTRA_DSO_LDOPTS += $(MOZ_PANGO_LIBS) $(CAIRO_FT_LIBS) -lfontconfig
 endif
 
-ifeq ($(MOZ_WIDGET_TOOLKIT),cocoa)
+ifneq (,$(filter cocoa uikit,$(MOZ_WIDGET_TOOLKIT)))
 CPPSRCS	+= \
 	gfxQuartzSurface.cpp \
 	gfxQuartzImageSurface.cpp \
