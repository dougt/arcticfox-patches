# HG changeset patch
# User Ted Mielczarek <ted.mielczarek@gmail.com>
# Date 1272373064 14400
# Node ID b724ab653e62fadfb0c811989326887f205c1c1f
# Parent  1d7327fd21ca54bedbd6b276d68188aedb486bd9
imported patch thebes-uikit-tweaks

diff --git a/gfx/thebes/public/Makefile.in b/gfx/thebes/public/Makefile.in
--- a/gfx/thebes/public/Makefile.in
+++ b/gfx/thebes/public/Makefile.in
@@ -108,7 +108,7 @@
 EXPORTS +=	gfxPDFSurface.h
 endif
 
-ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))
+ifneq (,$(filter cocoa uikit,$(MOZ_WIDGET_TOOLKIT)))
 EXPORTS +=	gfxPlatformMac.h \
 		gfxQuartzSurface.h \
 		gfxQuartzImageSurface.h \
diff --git a/gfx/thebes/public/gfxQuartzSurface.h b/gfx/thebes/public/gfxQuartzSurface.h
--- a/gfx/thebes/public/gfxQuartzSurface.h
+++ b/gfx/thebes/public/gfxQuartzSurface.h
@@ -42,7 +42,11 @@
 #include "gfxASurface.h"
 #include "gfxImageSurface.h"
 
+#ifdef MOZ_WIDGET_COCOA
 #include <Carbon/Carbon.h>
+#else
+#include <CoreGraphics/CoreGraphics.h>
+#endif
 
 class gfxContext;
 
