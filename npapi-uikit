# HG changeset patch
# User Ted Mielczarek <ted.mielczarek@gmail.com>
# Date 1272373064 14400
# Node ID 62d5829586a555e28a88d6fde6a4c21ed25b48fe
# Parent  51219cd52d049d08f0265eaacbda829a0e2bf2c3
imported patch npapi-uikit

diff --git a/modules/plugin/base/public/npapi.h b/modules/plugin/base/public/npapi.h
--- a/modules/plugin/base/public/npapi.h
+++ b/modules/plugin/base/public/npapi.h
@@ -63,7 +63,13 @@
 #define NP_NO_CARBON
 #include <ApplicationServices/ApplicationServices.h>
 #else
+#ifdef MOZ_WIDGET_COCOA
 #include <Carbon/Carbon.h>
+#else
+#define NP_NO_QUICKDRAW
+#define NP_NO_CARBON
+#include <CoreGraphics/CoreGraphics.h>
+#endif
 #endif
 #endif
 
@@ -530,7 +536,10 @@
 
 typedef struct NP_Port
 {
+#ifdef MOZ_WIDGET_COCOA
+  //XXX: clearly busted
   CGrafPtr port;
+#endif
   int32_t portx; /* position inside the topmost window */
   int32_t porty;
 } NP_Port;
