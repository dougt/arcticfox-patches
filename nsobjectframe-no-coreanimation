diff --git a/layout/generic/nsObjectFrame.cpp b/layout/generic/nsObjectFrame.cpp
--- a/layout/generic/nsObjectFrame.cpp
+++ b/layout/generic/nsObjectFrame.cpp
@@ -164,8 +164,10 @@
 #ifdef XP_MACOSX
 #include "gfxQuartzNativeDrawing.h"
 #include "nsPluginUtilsOSX.h"
+#ifdef MOZ_WIDGET_COCOA
 #include "nsCoreAnimationSupport.h"
 #endif
+#endif
 
 #ifdef MOZ_X11
 #include <X11/Xlib.h>
@@ -447,7 +449,9 @@
   NP_CGContext                              mCGPluginPortCopy;
   NP_Port                                   mQDPluginPortCopy;
   PRInt32                                   mInCGPaintLevel;
+#ifdef MOZ_WIDGET_COCOA
   nsCARenderer                              mCARenderer;
+#endif
   static nsCOMPtr<nsITimer>                *sCATimer;
   static nsTArray<nsPluginInstanceOwner*>  *sCARefreshListeners;
   PRBool                                    mSentInitialTopLevelWindowEvent;
@@ -777,6 +781,7 @@
       return NS_ERROR_FAILURE;
     pluginWidget->SetPluginEventModel(mInstanceOwner->GetEventModel());
 
+#ifdef MOZ_WIDGET_COCOA
     if (mInstanceOwner->GetDrawingModel() == NPDrawingModelCoreAnimation) {
       NPWindow* window;
       mInstanceOwner->GetWindow(window);
@@ -784,6 +789,7 @@
       mInstanceOwner->SetupCARenderer(window->width, window->height);
     }
 #endif
+#endif
   }
 
   if (!IsHidden()) {
@@ -1642,10 +1648,13 @@
 #endif
 
       mInstanceOwner->BeginCGPaint();
+#ifdef MOZ_WIDGET_COCOA
       if (mInstanceOwner->GetDrawingModel() == NPDrawingModelCoreAnimation) {
         // CoreAnimation is updated, render the layer and perform a readback.
         mInstanceOwner->RenderCoreAnimation(cgContext, window->width, window->height);
-      } else {
+      } else
+#endif
+        {
         mInstanceOwner->Paint(nativeClipRect - offset, cgContext);
       }
       mInstanceOwner->EndCGPaint();
@@ -3534,6 +3543,7 @@
 nsCOMPtr<nsITimer>                *nsPluginInstanceOwner::sCATimer = NULL;
 nsTArray<nsPluginInstanceOwner*>  *nsPluginInstanceOwner::sCARefreshListeners = NULL;
 
+#ifdef MOZ_WIDGET_COCOA
 void nsPluginInstanceOwner::CARefresh(nsITimer *aTimer, void *aClosure) {
   if (!sCARefreshListeners) {
     return;
@@ -3622,6 +3632,7 @@
     ::CGContextDrawImage(aCGContext, CGRectMake(0,0,aWidth,aHeight), caImage);
   }
 }
+#endif
 
 void* nsPluginInstanceOwner::GetPluginPortCopy()
 {
