# HG changeset patch
# Parent 6d97dba30bb8d5870ccbd82cf1a7e268a90fcced
diff --git a/content/html/content/src/Makefile.in b/content/html/content/src/Makefile.in
--- a/content/html/content/src/Makefile.in
+++ b/content/html/content/src/Makefile.in
@@ -110,7 +110,6 @@
 		nsHTMLTableRowElement.cpp \
 		nsHTMLTableSectionElement.cpp \
 		nsHTMLTextAreaElement.cpp \
-		nsHTMLTimeRanges.cpp \
 		nsHTMLTitleElement.cpp \
 		$(NULL)
 
@@ -120,6 +119,7 @@
 		nsHTMLMediaElement.cpp \
 		nsHTMLMediaError.cpp \
 		nsHTMLSourceElement.cpp \
+		nsHTMLTimeRanges.cpp \
 		nsHTMLVideoElement.cpp \
 		$(NULL)
 endif
diff --git a/layout/build/Makefile.in b/layout/build/Makefile.in
--- a/layout/build/Makefile.in
+++ b/layout/build/Makefile.in
@@ -169,9 +169,11 @@
 	$(NULL)
 endif
 
+ifdef MOZ_MEDIA
 SHARED_LIBRARY_LIBS     += \
        $(DEPTH)/content/media/raw/$(LIB_PREFIX)gkconraw_s.$(LIB_SUFFIX)\
        $(NULL)
+endif
 
 ifdef MOZ_WEBM
 SHARED_LIBRARY_LIBS 	+= \
