# HG changeset patch
# User Ted Mielczarek <ted.mielczarek@gmail.com>
# Date 1288962718 14400
# Node ID 08b24f8f7a8db5254367d779a2b1ed430d4a49ce
# Parent  81b79a8521652f52769b2412def2df5509e5752f
imported patch mozconfig-fix-compiler

diff --git a/build/iphone-device-mozconfig b/build/iphone-device-mozconfig
--- a/build/iphone-device-mozconfig
+++ b/build/iphone-device-mozconfig
@@ -5,12 +5,12 @@
 ac_add_options --disable-optimize
 
 export CROSS_COMPILE=1
-export CC="/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc-4.2 -arch armv6 -miphoneos-version-min=3.2"
-export CXX="/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++-4.2 -arch armv6 -miphoneos-version-min=3.2"
-export CPP="/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/cpp-4.2 -arch armv6"
+export CC="/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc-4.2 -arch armv6 -miphoneos-version-min=3.2 -isysroot /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS3.2.sdk"
+export CXX="/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++-4.2 -arch armv6 -miphoneos-version-min=3.2 -isysroot /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS3.2.sdk"
+export CPP="/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/cpp-4.2 -arch armv6 -isysroot /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS3.2.sdk"
 export LD="/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/ld -arch armv6"
 export AR=/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/ar
-export AS="/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/as -arch armv6"
+export AS="/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/as -arch armv6 -isysroot /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS3.2.sdk"
 export STRIP=/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/strip
 
 export PKG_CONFIG_PATH=/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS3.2.sdk/usr/lib/pkgconfig/
@@ -28,5 +28,7 @@
 ac_add_options --disable-ipc
 ac_add_options --disable-updater
 ac_add_options --disable-crashreporter
+#XXX: FIXME
+ac_add_options --disable-ctypes
 #ac_add_options --disable-tests
 export SKIP_LIBREG=1
